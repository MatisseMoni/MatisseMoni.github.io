<!DOCTYPE html>
<html>

<head>
    <title>GeoCarto</title>
    <meta charset="utf-8" />
</head>

<body>
    <h2>Exo 2</h2>
    <h3>Avec getCurrentPosition()</h3>
    <ul id="get">
        <li>sa position lon, lat <span class="coordonnees"></span></li>
        <li>la précision de mesure <span class="precision"></span></li>
        <li>sa vitesse <span class="vitesse"></span></li>
        <li>Le time stamp <span class="time"></span></li>
    </ul>
    <h3>Avec watchPosition()</h3>
    <ul id="watch">
        <li>sa position lon, lat <span class="coordonnees"></span></li>
        <li>la précision de mesure <span class="precision"></span></li>
        <li>sa vitesse <span class="vitesse"></span></li>
        <li>Le time stamp <span class="time"></span></li>
    </ul>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    function getPosition() {
        var options = {
            enableHighAccuracy: true,
            timeout: 5000,
            maximumAge: 0
        };

        function success(pos) {
            var crd = pos.coords;
            var time = pos.timestamp
            jQuery("#get .coordonnees").text("Latitude : " + crd.latitude + ", Longitude :" + crd.longitude)
            jQuery("#get .precision").text(crd.accuracy)
            jQuery("#get .time").text(time)
            jQuery("#get .vitesse").text(crd.speed)
            console.log(crd.speed)
        }

        function error(err) {
            console.warn(`ERREUR (${err.code}): ${err.message}`);
        }

        navigator.geolocation.getCurrentPosition(success, error, options);
    }

    function watch() {
        var id, target, options;

        function success(pos) {
            var crd = pos.coords;
            var time = pos.timestamp
            jQuery("#watch .coordonnees").text("Latitude : " + crd.latitude + ", Longitude :" + crd.longitude)
            jQuery("#watch .precision").text(crd.accuracy)
            jQuery("#watch .time").text(time)
            jQuery("#watch .vitesse").text(crd.speed)
        }

        function error(err) {
            console.warn('ERROR(' + err.code + '): ' + err.message);
        }

        options = {
            enableHighAccuracy: false,
            timeout: 5000,
            maximumAge: 0
        };

        id = navigator.geolocation.watchPosition(success, error, options);
    }

    watch()
    getPosition()
    



</script>

</html>